(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"y+Ic":function(l,n,u){"use strict";u.r(n);var e=u("8Y7J"),s=u("s7LF");class t{constructor(l,n,u){this.chatService=l,this.apiService=n,this.router=u,this.loader=!1,this.profileForm=new s.g({username:new s.e("",[s.p.required,s.p.minLength(5)]),email:new s.e({value:"",disabled:!0},[s.p.required,s.p.email]),firstName:new s.e("",[s.p.required,s.p.minLength(3)]),lastName:new s.e("",[])},{validators:[this.uniqueUser("username")]}),this.profileValidations={username:[{type:"required",message:"Username is required"},{type:"empty",message:"Username cannot be empty"},{type:"unique",message:"Username already taken"},{type:"minlength",message:"Username must be atleast 5 characters long"}],email:[{type:"required",message:"Email is required"},{type:"email",message:"Invalid Email"}],firstName:[{type:"required",message:"First Name is required"},{type:"minlength",message:"First Name must be atleast 3 characters long"}],password:[{type:"required",message:"Password is required"},{type:"minlength",message:"Password must be atleast 8 characters long"}],confirmPassword:[{type:"required",message:"Confirm Password is required"},{type:"mustMatch",message:"Password and Confirm Password must match"}]}}ngOnInit(){this.setUserValues()}setUserValues(){this.apiService.getUserDetails().subscribe(l=>{""!==l.data.username&&this.profileForm.controls.username.setValue(l.data.username),this.profileForm.controls.email.setValue(l.data.email),this.profileForm.controls.firstName.setValue(l.data.firstName),this.profileForm.controls.lastName.setValue(l.data.lastName)},l=>{console.log(l),this.errorMessage=this.chatService.showResponseError(l)})}uniqueUser(l){return n=>{const u=n.controls[l];u.errors&&!u.errors.unique||(""!==u.value.trim()?this.apiService.checkIfUserExists(u.value).subscribe(l=>{u.setErrors(l.exists?{unique:!0}:null)},l=>console.log(l)):u.setErrors({empty:!0}))}}mustMatch(l,n){return u=>{const e=u.controls[n];e.errors&&!e.errors.mustMatch||e.setErrors(u.controls[l].value!==e.value?{mustMatch:!0}:null)}}getErrors(l){return this.chatService.getErrors(l,this.profileForm,this.profileValidations)}getInvalidCondition(l){return this.profileForm.get(l).invalid&&this.profileForm.get(l).dirty}updateProfile(){this.profileForm.valid?(console.log(this.profileForm.value),this.loader=!0,this.profileForm.disable(),this.apiService.updateProfile(this.profileForm.value).subscribe(l=>{this.loader=!1,this.profileForm.enable();const n=this.chatService.getUserInfo();n.username=l.data.username,this.chatService.setUserInfo(n),this.router.navigateByUrl("/user/join")},l=>{this.loader=!1,this.profileForm.enable(),this.errorMessage=this.chatService.showResponseError(l)})):this.chatService.markFieldsAsDirty(this.profileForm)}}class a{}var i=u("pMnS"),r=u("fNgX"),o=u("SVse"),b=u("ZSeD"),c=u("yTNM"),d=u("iInd"),m=e.nb({encapsulation:0,styles:[[""]],data:{}});function p(l){return e.Kb(0,[(l()(),e.pb(0,0,null,null,1,"div",[["class","invalid-feedback"]],null,null,null,null,null)),(l()(),e.Ib(1,null,[" "," "]))],null,(function(l,n){l(n,1,0,n.component.getErrors("username"))}))}function g(l){return e.Kb(0,[(l()(),e.pb(0,0,null,null,1,"div",[["class","valid-feedback d-block"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,[" Username Present "]))],null,null)}function f(l){return e.Kb(0,[(l()(),e.pb(0,0,null,null,1,"div",[["class","invalid-feedback"]],null,null,null,null,null)),(l()(),e.Ib(1,null,[" "," "]))],null,(function(l,n){l(n,1,0,n.component.getErrors("firstName"))}))}function v(l){return e.Kb(0,[(l()(),e.pb(0,0,null,null,1,"div",[["class","invalid-feedback"]],null,null,null,null,null)),(l()(),e.Ib(1,null,[" "," "]))],null,(function(l,n){l(n,1,0,n.component.getErrors("lastName"))}))}function h(l){return e.Kb(0,[(l()(),e.pb(0,0,null,null,1,"div",[["class","invalid-feedback"]],null,null,null,null,null)),(l()(),e.Ib(1,null,[" "," "]))],null,(function(l,n){l(n,1,0,n.component.getErrors("email"))}))}function C(l){return e.Kb(0,[(l()(),e.pb(0,0,null,null,2,"span",[["class","spinner-border spinner-border-sm"],["role","status"]],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Loading..."]))],null,null)}function I(l){return e.Kb(0,[(l()(),e.pb(0,0,null,null,1,"div",[["class","invalid-feedback mt-3 d-block"]],null,null,null,null,null)),(l()(),e.Ib(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.component.errorMessage)}))}function A(l){return e.Kb(0,[(l()(),e.pb(0,0,null,null,85,"div",[["class","container-fluid view-area"]],null,null,null,null,null)),(l()(),e.pb(1,0,null,null,84,"div",[["class","row mt-4"]],null,null,null,null,null)),(l()(),e.pb(2,0,null,null,83,"div",[["class","col-md-6 m-auto"]],null,null,null,null,null)),(l()(),e.pb(3,0,null,null,82,"div",[["class","card"]],null,null,null,null,null)),(l()(),e.pb(4,0,null,null,1,"div",[["class","card-header bg-primary text-light"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,[" Update Profile "])),(l()(),e.pb(6,0,null,null,79,"div",[["class","card-body"]],null,null,null,null,null)),(l()(),e.pb(7,0,null,null,78,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,u){var s=!0,t=l.component;return"submit"===n&&(s=!1!==e.Ab(l,9).onSubmit(u)&&s),"reset"===n&&(s=!1!==e.Ab(l,9).onReset()&&s),"ngSubmit"===n&&(s=!1!==t.updateProfile()&&s),s}),null,null)),e.ob(8,16384,null,0,s.t,[],null,null),e.ob(9,540672,null,0,s.h,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),e.Fb(2048,null,s.b,null,[s.h]),e.ob(11,16384,null,0,s.m,[[4,s.b]],null,null),(l()(),e.pb(12,0,null,null,18,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(13,0,null,null,4,"label",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Username ("])),(l()(),e.pb(15,0,null,null,1,"span",[["class","text-danger"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,["*"])),(l()(),e.Ib(-1,null,[")"])),(l()(),e.pb(18,0,null,null,8,"input",[["autocomplete","off"],["class","form-control"],["formControlName","username"],["placeholder","Your Username"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var s=!0;return"input"===n&&(s=!1!==e.Ab(l,22)._handleInput(u.target.value)&&s),"blur"===n&&(s=!1!==e.Ab(l,22).onTouched()&&s),"compositionstart"===n&&(s=!1!==e.Ab(l,22)._compositionStart()&&s),"compositionend"===n&&(s=!1!==e.Ab(l,22)._compositionEnd(u.target.value)&&s),s}),null,null)),e.Fb(512,null,o.w,o.x,[e.q,e.r,e.k,e.B]),e.ob(20,278528,null,0,o.j,[o.w],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Db(21,{"is-invalid":0,"is-valid":1}),e.ob(22,16384,null,0,s.c,[e.B,e.k,[2,s.a]],null,null),e.Fb(1024,null,s.j,(function(l){return[l]}),[s.c]),e.ob(24,671744,null,0,s.f,[[3,s.b],[8,null],[8,null],[6,s.j],[2,s.s]],{name:[0,"name"]},null),e.Fb(2048,null,s.k,null,[s.f]),e.ob(26,16384,null,0,s.l,[[4,s.k]],null,null),(l()(),e.eb(16777216,null,null,1,null,p)),e.ob(28,16384,null,0,o.l,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.eb(16777216,null,null,1,null,g)),e.ob(30,16384,null,0,o.l,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(31,0,null,null,16,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(32,0,null,null,4,"label",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["First Name ("])),(l()(),e.pb(34,0,null,null,1,"span",[["class","text-danger"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,["*"])),(l()(),e.Ib(-1,null,[")"])),(l()(),e.pb(37,0,null,null,8,"input",[["autocomplete","firstName"],["class","form-control"],["formControlName","firstName"],["placeholder","Your First Name"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var s=!0;return"input"===n&&(s=!1!==e.Ab(l,41)._handleInput(u.target.value)&&s),"blur"===n&&(s=!1!==e.Ab(l,41).onTouched()&&s),"compositionstart"===n&&(s=!1!==e.Ab(l,41)._compositionStart()&&s),"compositionend"===n&&(s=!1!==e.Ab(l,41)._compositionEnd(u.target.value)&&s),s}),null,null)),e.Fb(512,null,o.w,o.x,[e.q,e.r,e.k,e.B]),e.ob(39,278528,null,0,o.j,[o.w],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Db(40,{"is-invalid":0}),e.ob(41,16384,null,0,s.c,[e.B,e.k,[2,s.a]],null,null),e.Fb(1024,null,s.j,(function(l){return[l]}),[s.c]),e.ob(43,671744,null,0,s.f,[[3,s.b],[8,null],[8,null],[6,s.j],[2,s.s]],{name:[0,"name"]},null),e.Fb(2048,null,s.k,null,[s.f]),e.ob(45,16384,null,0,s.l,[[4,s.k]],null,null),(l()(),e.eb(16777216,null,null,1,null,f)),e.ob(47,16384,null,0,o.l,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(48,0,null,null,13,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(49,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Last Name"])),(l()(),e.pb(51,0,null,null,8,"input",[["autocomplete","lastName"],["class","form-control"],["formControlName","lastName"],["placeholder","Your Last Name"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var s=!0;return"input"===n&&(s=!1!==e.Ab(l,55)._handleInput(u.target.value)&&s),"blur"===n&&(s=!1!==e.Ab(l,55).onTouched()&&s),"compositionstart"===n&&(s=!1!==e.Ab(l,55)._compositionStart()&&s),"compositionend"===n&&(s=!1!==e.Ab(l,55)._compositionEnd(u.target.value)&&s),s}),null,null)),e.Fb(512,null,o.w,o.x,[e.q,e.r,e.k,e.B]),e.ob(53,278528,null,0,o.j,[o.w],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Db(54,{"is-invalid":0}),e.ob(55,16384,null,0,s.c,[e.B,e.k,[2,s.a]],null,null),e.Fb(1024,null,s.j,(function(l){return[l]}),[s.c]),e.ob(57,671744,null,0,s.f,[[3,s.b],[8,null],[8,null],[6,s.j],[2,s.s]],{name:[0,"name"]},null),e.Fb(2048,null,s.k,null,[s.f]),e.ob(59,16384,null,0,s.l,[[4,s.k]],null,null),(l()(),e.eb(16777216,null,null,1,null,v)),e.ob(61,16384,null,0,o.l,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(62,0,null,null,16,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),e.pb(63,0,null,null,4,"label",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Email ("])),(l()(),e.pb(65,0,null,null,1,"span",[["class","text-danger"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,["*"])),(l()(),e.Ib(-1,null,[")"])),(l()(),e.pb(68,0,null,null,8,"input",[["autocomplete","email"],["class","form-control"],["formControlName","email"],["placeholder","Your Email"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,u){var s=!0;return"input"===n&&(s=!1!==e.Ab(l,72)._handleInput(u.target.value)&&s),"blur"===n&&(s=!1!==e.Ab(l,72).onTouched()&&s),"compositionstart"===n&&(s=!1!==e.Ab(l,72)._compositionStart()&&s),"compositionend"===n&&(s=!1!==e.Ab(l,72)._compositionEnd(u.target.value)&&s),s}),null,null)),e.Fb(512,null,o.w,o.x,[e.q,e.r,e.k,e.B]),e.ob(70,278528,null,0,o.j,[o.w],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Db(71,{"is-invalid":0}),e.ob(72,16384,null,0,s.c,[e.B,e.k,[2,s.a]],null,null),e.Fb(1024,null,s.j,(function(l){return[l]}),[s.c]),e.ob(74,671744,null,0,s.f,[[3,s.b],[8,null],[8,null],[6,s.j],[2,s.s]],{name:[0,"name"]},null),e.Fb(2048,null,s.k,null,[s.f]),e.ob(76,16384,null,0,s.l,[[4,s.k]],null,null),(l()(),e.eb(16777216,null,null,1,null,h)),e.ob(78,16384,null,0,o.l,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.pb(79,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),e.pb(80,0,null,null,3,"button",[["class","btn btn-primary d-inline-block"],["type","submit"]],[[8,"disabled",0]],null,null,null,null)),(l()(),e.eb(16777216,null,null,1,null,C)),e.ob(82,16384,null,0,o.l,[e.M,e.J],{ngIf:[0,"ngIf"]},null),(l()(),e.Ib(-1,null,["Update Profile"])),(l()(),e.eb(16777216,null,null,1,null,I)),e.ob(85,16384,null,0,o.l,[e.M,e.J],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,9,0,u.profileForm);var e=l(n,21,0,u.getInvalidCondition("username"),u.profileForm.get("username").valid);l(n,20,0,"form-control",e),l(n,24,0,"username"),l(n,28,0,u.getInvalidCondition("username")),l(n,30,0,u.profileForm.get("username").valid);var s=l(n,40,0,u.getInvalidCondition("firstName"));l(n,39,0,"form-control",s),l(n,43,0,"firstName"),l(n,47,0,u.getInvalidCondition("firstName"));var t=l(n,54,0,u.getInvalidCondition("lastName"));l(n,53,0,"form-control",t),l(n,57,0,"lastName"),l(n,61,0,u.getInvalidCondition("lastName"));var a=l(n,71,0,u.getInvalidCondition("email"));l(n,70,0,"form-control",a),l(n,74,0,"email"),l(n,78,0,u.getInvalidCondition("email")),l(n,82,0,u.loader),l(n,85,0,u.errorMessage)}),(function(l,n){var u=n.component;l(n,7,0,e.Ab(n,11).ngClassUntouched,e.Ab(n,11).ngClassTouched,e.Ab(n,11).ngClassPristine,e.Ab(n,11).ngClassDirty,e.Ab(n,11).ngClassValid,e.Ab(n,11).ngClassInvalid,e.Ab(n,11).ngClassPending),l(n,18,0,e.Ab(n,26).ngClassUntouched,e.Ab(n,26).ngClassTouched,e.Ab(n,26).ngClassPristine,e.Ab(n,26).ngClassDirty,e.Ab(n,26).ngClassValid,e.Ab(n,26).ngClassInvalid,e.Ab(n,26).ngClassPending),l(n,37,0,e.Ab(n,45).ngClassUntouched,e.Ab(n,45).ngClassTouched,e.Ab(n,45).ngClassPristine,e.Ab(n,45).ngClassDirty,e.Ab(n,45).ngClassValid,e.Ab(n,45).ngClassInvalid,e.Ab(n,45).ngClassPending),l(n,51,0,e.Ab(n,59).ngClassUntouched,e.Ab(n,59).ngClassTouched,e.Ab(n,59).ngClassPristine,e.Ab(n,59).ngClassDirty,e.Ab(n,59).ngClassValid,e.Ab(n,59).ngClassInvalid,e.Ab(n,59).ngClassPending),l(n,68,0,e.Ab(n,76).ngClassUntouched,e.Ab(n,76).ngClassTouched,e.Ab(n,76).ngClassPristine,e.Ab(n,76).ngClassDirty,e.Ab(n,76).ngClassValid,e.Ab(n,76).ngClassInvalid,e.Ab(n,76).ngClassPending),l(n,80,0,u.loader)}))}function y(l){return e.Kb(0,[(l()(),e.pb(0,0,null,null,1,"app-profile",[],null,null,null,A,m)),e.ob(1,114688,null,0,t,[b.a,c.a,d.k],null,null)],(function(l,n){l(n,1,0)}),null)}var k=e.lb("app-profile",t,y,{},{},[]),F=u("C1gq"),N=u("aHM3"),w=u("Nv++"),q=u("qn1f");u.d(n,"ProfileModuleNgFactory",(function(){return P}));var P=e.mb(a,[],(function(l){return e.xb([e.yb(512,e.j,e.X,[[8,[i.a,r.b,r.a,k]],[3,e.j],e.v]),e.yb(4608,o.n,o.m,[e.s,[2,o.z]]),e.yb(4608,s.r,s.r,[]),e.yb(4608,s.d,s.d,[]),e.yb(1073742336,o.c,o.c,[]),e.yb(1073742336,d.n,d.n,[[2,d.s],[2,d.k]]),e.yb(1073742336,F.a,F.a,[]),e.yb(1073742336,s.q,s.q,[]),e.yb(1073742336,s.i,s.i,[]),e.yb(1073742336,s.o,s.o,[]),e.yb(1073742336,N.a,N.a,[]),e.yb(1073742336,w.j,w.j,[]),e.yb(1073742336,q.a,q.a,[]),e.yb(1073742336,a,a,[]),e.yb(1024,d.i,(function(){return[[{path:"",component:t}]]}),[])])}))}}]);